pre-push:
  parallel: true
  jobs:
    - name: Audit composer packages
      run: composer audit
      fail_text: "Composer security vulnerabilities found"

    - name: Audit npm packages
      run: npm audit --audit-level moderate
      fail_text: "npm security vulnerabilities found"

    - name: Lint PHP files
      run: composer lint

    - name: Type check
      run: npm run types

    - name: Lint JS/TS files
      run: npm run lint

pre-commit:
  parallel: true
  jobs:
    - name: Fix PHP files
      run: composer fix
      glob: "*.php"
      stage_fixed: true

    - name: Fix JS/TS files
      run: npm run fix
      glob: "*.{js,ts,jsx,tsx}"
      stage_fixed: true
